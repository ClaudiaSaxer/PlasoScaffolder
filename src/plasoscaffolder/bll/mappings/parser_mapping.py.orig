# -*- coding: utf-8 -*-
""" Module representing function for the different files. """
from plasoscaffolder.bll.mappings import base_mapping_helper
from plasoscaffolder.bll.mappings import base_parser_mapping
<<<<<<< HEAD
from plasoscaffolder.model import parser_data_model
=======
from plasoscaffolder.model import sql_query_model
from plasoscaffolder.model import event_model
>>>>>>> dev


class ParserMapper(base_parser_mapping.BaseParserMapper):
  """Class representing the parser mapper."""

  _PARSER_TEMPLATE = 'parser_template.jinja2'

  def __init__(self, mapping_helper: base_mapping_helper.BaseMappingHelper()):
    """Initializing the init mapper class.

    Args:
      template_path (str): the path to the template directory
    """
    super().__init__()
    self.__helper = mapping_helper

<<<<<<< HEAD
  def GetParser(self, parser_data: parser_data_model.ParserDataModel) -> str:
    """Retrieves the parser.

    Args:
      parser_data: the data for the parser
=======
  def GetParser(self, plugin_name: str, events: [event_model.EventModel], queries: [sql_query_model.SQLQueryModel]) -> str:
    """Retrieves the parser.

    Args:
      plugin_name (str): the name of the plugin
      events ([event_model.EventModel]): list of events
      queries ([sql_query_model.SQLQueryModel]): list of queries
>>>>>>> dev

    Returns:
      str: the rendered template
    """
    class_name = self.__helper.GenerateClassName(parser_data.PluginName)
    context = {'plugin_name': parser_data.PluginName,
               'class_name' : class_name,
               'events'   : parser_data.Events,
               'queries'    : parser_data.Queries,
               'attributes': parser_data.Attributes,
               'database_name': parser_data.DatabaseName}
    rendered = self.__helper.RenderTemplate(self._PARSER_TEMPLATE, context)
    return rendered
